---

title: 哪些情况下适合建立索引？
author: John Doe
tags:
  - MySQL
  - 索引
  - 原则
categories:
  - MySQL
date: 2022-03-23 09:18:00
---

- 字段的数值有唯一性约束
（业务上具有唯一特性的字段，即使是组合字段，也必须建成唯一索引。（来源：Alibaba））
      
- 频繁作为where查询条件的字段
（某个字段在SELECT语句的 WHERE 条件中经常被使用到，那么就需要给这个字段创建索引了。尤其是在
数据量大的情况下，创建普通索引就可以大幅提升数据查询的效率。）

- 经常 GROUP BY 和 ORDER BY 的列
（索引就是让数据按照某种顺序进行存储或检索，因此当我们使用 GROUP BY 对数据进行分组查询，或者
使用 ORDER BY 对数据进行排序的时候，就需要 对分组或者排序的字段进行索引 。如果待排序的列有多
个，那么可以在这些列上建立 组合索引 。）

-  UPDATE、DELETE 的 WHERE 条件列
（对数据按照某个条件进行查询后再进行 UPDATE 或 DELETE 的操作，如果对 WHERE 字段创建了索引，就
能大幅提升效率。原理是因为我们需要先根据 WHERE 条件列检索出来这条记录，然后再对它进行更新或
删除。如果进行更新的时候，更新的字段是非索引字段，提升的效率会更明显，这是因为非索引字段更
新不需要对索引进行维护。）

- DISTINCT 字段需要创建索引
（有时候我们需要对某个字段进行去重，使用 DISTINCT，那么对这个字段创建索引，也会提升查询效率。）

- 多表 JOIN 连接操作时，创建索引注意事项
（首先， 连接表的数量尽量不要超过 3 张 ，因为每增加一张表就相当于增加了一次嵌套的循环，数量级增
长会非常快，严重影响查询的效率。
其次， 对 WHERE 条件创建索引 ，因为 WHERE 才是对数据条件的过滤。如果在数据量非常大的情况下，
没有 WHERE 条件过滤是非常可怕的。
最后， 对用于连接的字段创建索引 ，并且该字段在多张表中的 类型必须一致 。比如 course_id 在 student_info 表和 course 表中都为 int(11) 类型，而不能一个为 int 另一个为 varchar 类型。）

-  使用列的类型小的创建索引

- 使用字符串前缀创建索引
（例如创建一张商户表，因为地址字段比较长，可以在地址字段上建立前缀索引）

    注意：
    
    【 强制 】在 varchar 字段上建立索引时，必须指定索引长度，没必要对全字段建立索引，根据实际文本区分度决定索引长度。
    
    说明：索引的长度与区分度是一对矛盾体，一般对字符串类型数据，长度为 20 的索引，区分度会 高达 90% 以上 ，可以使用 count(distinct left(列名, 索引长度))/count(*)的区分度来确定。

-  区分度高(散列性高)的列适合作为索引

-  使用最频繁的列放到联合索引的左侧

- 在多个字段都要创建索引的情况下，联合索引优于单值索引

- 限制索引的数目